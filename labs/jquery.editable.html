<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<head>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="Content-Type" content="text/html; charset=gbk" />
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<style type="text/css">/*<![CDATA[*/
table{border-spacing:0; border-collapse:collapse;}
    th,td{border:1px solid #ccc; padding:2px 5px;}
    a.save,a.cancel{display:none;}
/*]]>*/</style>
<title>test</title>
</head>
<body>
<div>
    <input type="button" value="ÐÂÔö" />
</div>
<table id="editableTable">
<thead>
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Age</th>
        <th>Height</th>
        <th>Opration</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>0</td>
        <td>Lover</td>
        <td>18</td>
        <td>175</td>
        <td>
            <a href="javascript:void(0);" class="edit">±à¼­</a>
            <a href="javascript:void(0);" class="remove">É¾³ý</a>
        </td>
    </tr>
    <tr>
        <td>1</td>
        <td>Lover</td>
        <td>18</td>
        <td>180</td>
        <td>
            <a href="javascript:void(0);" class="edit">±à¼­</a>
            <a href="javascript:void(0);" class="remove">É¾³ý</a>
        </td>
    </tr>
    <tr>
        <td>2</td>
        <td>Lover</td>
        <td>18</td>
        <td>
            <a href="javascript:void(0);" class="edit">±à¼­</a>
            <a href="javascript:void(0);" class="remove">É¾³ý</a>
            <a href="javascript:void(0);" class="save">±£´æ</a>
            <a href="javascript:void(0);" class="cancel">È¡Ïû</a>
        </td>
    </tr>
</tbody>
</table>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript">/*<![CDATA[*/
(function($){
    $.fn.editable = function(options){
        var defaults = {
            operateColumn : "tr>td:last-child",
            editbar : "tr>td:last-child>a.edit",
            removebar : "tr>td:last-child>a.remove",
            savebar : "tr>td:last-child>a.save",
            cancelbar : "tr>td:last-child>a.cancel",
            columns : []
        };
        var settings = $.extend(settings, defaults, options);
        var _this = this;
        $(settings.editbar, this).live("click", function(){
            var line = $(this).parent().parent(),
                columns = line.find(">td");
            for(var i=0,val,l=columns.length; i<l; i++){
                if(!settings.columns[i].type){continue;}
                val = columns[i].innerHTML;
                switch(settings.columns[i].type){
                case "readonly":
                    break;
                case "number":
                case "int":
                    val = parseInt(val);
                    columns[i].innerHTML = '<input type="number" size="'+size(settings.columns[i].max)+'" value="'+val+'" />';
                    break;
                case "text":
                    columns[i].innerHTML = '<input type="text" size="'+settings.columns[i].max+'" value="'+val+'" />';
                    break;
                default:
                    break;
                }
            }
            // FIXME: get the button.
            var p=$(_this);
            $(settings.editbar, p).hide();
            $(settings.removebar, p).hide();
            $(settings.savebar, p).show();
            $(settings.cancelbar, p).show();
        });
        $(settings.removebar, this).click(function(){
            $(this).parent().parent().remove();
        });
        $(settings.savebar, this).click(function(){
            settings.save.call(this);
        });
        $(settings.cancelbar, this).click(function(){
            // FIXME: get the button.
            var p = $(_this).parent();
            $(settings.savebar, p).hide();
            $(settings.cancelbar, p).hide();
            $(settings.editbar, p).show();
            $(settings.removebar, p).show();
        });

        function size(val){
            return String(val).length;

            if(typeof val =="string" || val instanceof String){
                return val.length;
            }else if(typeof(val)=="number" || val instanceof Number){
                return String(val).length;
            }
        }
    };
})(jQuery);

$(function(){
    $("#editableTable").editable({
        columns : [
            {type:"readonly"},
            {type:"text", min:1, max:32, pattern:""},
            {type:"number", min:0, max:100}
            {type:"float", min:0, max:100}
        ]
    });
});
/*]]>*/</script>
</body>
</html>
